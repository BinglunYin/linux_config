#!/bin/bash
# B. Yin

# nohup  ~/yin_github/linux_config/mktar2  -gz  aaa/  &  



if [ $# != 2 ]; then
    echo "==> Wrong input. Abort!"
    exit

else
    dirn=$2
    dirn=${dirn%/}

    logfile=$dirn.tar.log
    
    date > $logfile
    echo -e "==> compressing $dirn\n" >> $logfile
    
    case "$1" in
        -xz)
            tar -cJvf  $dirn.tar.xz  $dirn  >>  $logfile
            ;;
        -gz)
            tar -czvf  $dirn.tar.gz  $dirn  >>  $logfile
            ;;
        -tar)
            tar -cvf   $dirn.tar     $dirn  >>  $logfile
            ;;
         *)
            echo "Wrong flag. ABORT!"
            return 0
            ;;
    esac
fi


echo -e "\n==> done!" >> $logfile
date                  >> $logfile




